{% extends '_judge_base.html.twig' %}

{% block body %}
  <div class='row'>
    <div class='col-12'>
      <h2>{{ 'about_team'|trans }}</h2>
      <dl class='row'>
        <dt class='col-3 col-md-2'>{{ 'competitor_zone.registration.form.name'|trans }}</dt>
        <dd class='col-9 col-md-4'>{{ team.name }}</dd>
        <dt class='col-3 col-md-2'>{{ 'competitor_zone.registration.form.identifier'|trans }}</dt>
        <dd class='col-9 col-md-4'>{{ team.identifier }}</dd>
        <dt class='col-3 col-md-2'>{{ 'competitor_zone.registration.form.city'|trans }}</dt>
        <dd class='col-9 col-md-4'>{{ team.city }}</dd>
        <dt class='col-3 col-md-2'>{{ 'competitor_zone.registration.form.scientific_organization'|trans }}</dt>
        <dd class='col-9 col-md-4'>{{ team.scientificOrganization|default('- brak -') }}</dd>
        <dt class='col-3 col-md-2'>{{ 'created_by'|trans }}</dt>
        <dd class='col-9 col-md-4'>
          <a href='mailto:{{ team.createdBy.email }}'> <i class='fa fa-fw fa-envelope'></i> {{ team.createdBy.name }}
          </a>
        </dd>
        <dt class='col-3 col-md-2'>{{ 'created_at'|trans }}</dt>
        <dd class='col-9 col-md-4'>{{ team.createdAt|date('Y-m-d H:i') }}</dd>
        <dt class='col-3 col-md-2'>{{ 'count_members'|trans }}</dt>
        <dd class='col-9 col-md-4'>{{ members|length }}</dd>
        <dt class='col-3 col-md-2'>{{ 'count_constructions'|trans }}</dt>
        <dd class='col-9 col-md-4'>{{ team.constructions|length }} ({{ constructions|length }})</dd>
      </dl>
      <h2>{{ 'members'|trans }}</h2>
      <table class='table table-hover'>
        <thead>
        <tr>
          <th class='text-center'>
            {{ 'competitor_zone.registration.form.forename'|trans }}
            {{ 'competitor_zone.registration.form.surname'|trans }}
          </th>
          <th class='text-center'>{{ 'competitor_zone.registration.form.shirt_type'|trans }}</th>
          <th class='text-center'>{{ 'created_at'|trans }}</th>
          <th class='text-center w-10'>{{ 'presence'|trans }}</th>
          <th class='text-center w-10'>{{ 'shirt_given_out'|trans }}</th>
        </tr>
        </thead>
        <tbody>
        {% for member in members %}
          <tr>
            <td class='align-middle'>{{ member.name }}</td>
            <td class='align-middle text-center'>
              {{ member.namedShirtType|trans }}
              {% if member.createdAt > event.registrationStopsAt %}
                <br/>({{ 'added_in_extended_registration_period'|trans }})
              {% endif %}
            </td>
            <td class='align-middle text-center'>{{ member.createdAt|date('Y-m-d H:i') }}</td>
            <td class='align-middle text-center'>
              <form action='{{ path('balticrobo_website_judge_registration_acceptmember', {
                'id': member.id,
                'action': 'presence'
              }) }}' method='post'>
                {% if member.presenceCheckedAt is null %}
                  <button class='btn btn-block btn-danger'>{{ '_button.no'|trans }}</button>
                {% else %}
                  <button class='btn btn-block btn-success'>{{ '_button.yes'|trans }}</button>
                {% endif %}
              </form>
            </td>
            <td class='align-middle text-center'>
              <form action='{{ path('balticrobo_website_judge_registration_acceptmember', {
                'id': member.id,
                'action': 'shirt_given'
              }) }}' method='post'>
                {% if member.shirtGivenOutAt is null %}
                  <button class='btn btn-block btn-danger'>{{ '_button.no'|trans }}</button>
                {% else %}
                  <button class='btn btn-block btn-success'>{{ '_button.yes'|trans }}</button>
                {% endif %}
              </form>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
      <h2>{{ 'constructions'|trans }}</h2>
      <table class='table table-hover'>
        <thead>
        <tr>
          <th class='text-center'>{{ 'competitor_zone.registration.form.construction_name'|trans }}</th>
          <th class='text-center'>{{ 'competition'|trans }}</th>
          <th class='text-center'>{{ 'created_at'|trans }}</th>
          <th class='text-center w-10'>{{ 'presence'|trans }}</th>
          <th class='text-center w-10'>{{ 'tech_validated'|trans }}</th>
        </tr>
        </thead>
        <tbody>
        {% for construction in constructions %}
          <tr>
            <td class='align-middle'>{{ construction.construction.name }}</td>
            <td class='align-middle text-center'>{{ construction.competition.name }}</td>
            <td class='align-middle text-center'>
              {{ construction.construction.createdAt|date('Y-m-d H:i') }}
              {% if construction.construction.createdAt > event.registrationStopsAt %}
                <br/>({{ 'added_in_extended_registration_period'|trans }})
              {% endif %}
            </td>
            <td class='align-middle text-center'>
              <form action='{{ path('balticrobo_website_judge_registration_acceptconstruction', {
                'id': construction.construction.id,
                'competitionId': construction.competition.id,
                'action': 'presence'
              }) }}' method='post'>
                {% if construction.presenceCheckedAt is null %}
                  <button class='btn btn-block btn-danger'>{{ '_button.no'|trans }}</button>
                {% else %}
                  <button class='btn btn-block btn-success'>{{ '_button.yes'|trans }}</button>
                {% endif %}
              </form>
            </td>
            <td class='align-middle text-center'>
              <form action='{{ path('balticrobo_website_judge_registration_acceptconstruction', {
                'id': construction.construction.id,
                'competitionId': construction.competition.id,
                'action': 'tech_valid'
              }) }}' method='post'>
                {% if construction.techValidatedAt is null %}
                  <button class='btn btn-block btn-danger'>{{ '_button.no'|trans }}</button>
                {% else %}
                  <button class='btn btn-block btn-success'>{{ '_button.yes'|trans }}</button>
                {% endif %}
              </form>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
